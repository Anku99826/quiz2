<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">
<title>Quiz Performance Report</title>

<link rel="stylesheet" th:href="@{/css/local/adminDashboard.css}">
<link rel="stylesheet" href="/css/bootstrap.min.css">
<link rel="stylesheet" href="/css/styles.css">
<link rel="stylesheet" href="/css/all.min.css">

<script src="/js/bootstrap.bundle.min.js" defer></script>
</head>

<body>

	<!-- Admin Layout -->
	<div th:insert="fragments/adminLayout :: adminLayout">...</div>

	<!-- Page Content -->
	<div class="container mt-4">
		<h3>Quiz Performance Report</h3>

		<form method="get" class="row g-2 mt-3">
			<div class="col-md-4">
				<input type="text" name="quizType" placeholder="Search Quiz Type"
					class="form-control" th:value="${selectedQuiz}">
			</div>

			<div class="col-md-2">
				<button class="btn btn-primary w-100">Filter</button>
			</div>
			<div class="mt-3 d-flex justify-content-between align-items-center">

				<!-- Left side: Export buttons -->
				<div class="d-flex gap-2">
					<a
						th:href="@{/admin/report/export/quiz-performance(quizType=${selectedQuiz})}"
						class="btn btn-success"> <i class="fas fa-file-csv"></i>
						Export CSV
					</a> <a
						th:href="@{/admin/report/export/quiz-performance/pdf(quizType=${selectedQuiz})}"
						class="btn btn-danger"> <i class="fas fa-file-pdf"></i> Export
						PDF
					</a>
				</div>

				<!-- Right side: Back button -->
				<a href="/admin/reports" class="btn btn-outline-secondary"> ‚Üê
					Back </a>

			</div>


		</form>


		<table class="table table-bordered table-hover mt-4">
			<thead class="table-dark text-center">
				<tr>
					<th>Quiz</th>
					<th>Start Date</th>
					<th>Total Marks</th>
					<th>Time Limit (mins)</th>
					<th>Total Attempts</th>
					<th>Avg</th>
					<th>Max</th>
					<th>Min</th>
				</tr>
			</thead>

			<tbody class="text-center">
				<tr th:each="r : ${reports}">
					<td th:text="${r[0]}"></td>
					<td th:text="${#temporals.format(r[1], 'dd-MM-yyyy')}"></td>
					<td th:text="${r[2]}"></td>
					<td th:text="${r[3]}"></td>
					<td th:text="${r[4]}"></td>
					<td th:text="${#numbers.formatDecimal(r[5],1,2)}"></td>
					<td th:text="${r[6]}"></td>
					<td th:text="${r[7]}"></td>
				</tr>

				<tr th:if="${#lists.isEmpty(reports)}">
					<td colspan="7" class="text-muted">No quiz performance data
						found</td>
				</tr>
			</tbody>

		</table>



	</div>

</body>
</html>
